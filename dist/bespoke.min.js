/*! Bespoke.js v0.2.2 Â© 2013 Mark Dalgleish, Licensed MIT */
!function(a,b,c){var d=function(a,b){var d=c.querySelector(a),f=[].slice.call(d.children,0),l=f[0],m={},n=function(a,b){f[a]&&(i(m,"deactivate",t(l,b)),l=f[a],f.map(p),i(m,"activate",t(l,b)),j(l,"active"),k(l,"inactive"))},p=function(a,b){var c=b-f.indexOf(l),d=c>0?"after":"before";["before(-\\d+)?","after(-\\d+)?","active","inactive"].map(k.bind(null,a)),a!==l&&["inactive",d,d+"-"+Math.abs(c)].map(j.bind(null,a))},q=function(a,b){i(m,"slide",t(f[a],b))&&n(a,b)},r=function(a){var b=f.indexOf(l)+1;i(m,"next",t(l,a))&&n(b,a)},s=function(a){var b=f.indexOf(l)-1;i(m,"prev",t(l,a))&&n(b,a)},t=function(a,b){return b=b||{},b.index=f.indexOf(a),b.slide=a,b},u={on:g.bind(null,m),off:h.bind(null,m),fire:i.bind(null,m),slide:q,next:r,prev:s,parent:d,slides:f};return j(d,"parent"),f.map(function(a){j(a,"slide")}),Object.keys(b||{}).map(function(a){var c=b[a];c&&o[a](u,c===!0?{}:c)}),n(0),e.push(u),u},e=[],f={},g=function(a,b,c){(a[b]||(a[b]=[])).push(c)},h=function(a,b,c){a[b]=(a[b]||[]).filter(function(a){return a!==c})},i=function(a,b,c){return(a[b]||[]).concat(a!==f&&f[b]||[]).reduce(function(a,b){return a&&b(c)!==!1},!0)},j=function(b,c){b.classList.add(a+"-"+c)},k=function(b,c){b.className=b.className.replace(new RegExp(a+"-"+c+"(\\s|$)","g")," ").replace(/^\s+|\s+$/g,"")},l=function(a){return function(b){e.map(function(c){c[a](b)})}},m=function(a){return{from:function(b,c){return(c=c||{})[a]=!0,d(b,c)}}},n=function(a){return function(b){var d,e;c.addEventListener("keydown",function(c){var d=c.which;(34===d||32===d||"X"===a&&39===d||"Y"===a&&40===d)&&b.next(),(33===d||"X"===a&&37===d||"Y"===a&&38===d)&&b.prev()}),b.parent.addEventListener("touchstart",function(b){b.touches.length&&(d=b.touches[0]["page"+a],e=0)}),b.parent.addEventListener("touchmove",function(b){b.touches.length&&(b.preventDefault(),e=b.touches[0]["page"+a]-d)}),b.parent.addEventListener("touchend",function(){Math.abs(e)>50&&(e>0?b.prev():b.next())})}},o={horizontal:n("X"),vertical:n("Y")};b[a]={from:d,slide:l("slide"),next:l("next"),prev:l("prev"),horizontal:m("horizontal"),vertical:m("vertical"),on:g.bind(null,f),off:h.bind(null,f),plugins:o}}("bespoke",this,document);